# テトリス実装 機能要件書

![image](https://github.com/user-attachments/assets/1bf319fe-6564-4289-a5d8-70c2668bdfac)


## 1. 基本ゲームプレイ

### 1.1 ゲームフィールド
- 10列 x 20行のグリッドを使用
- 最上部に2行の余白を設ける（新しいテトリミノの出現用）

### 1.2 テトリミノ
![image](https://github.com/user-attachments/assets/0a4bd020-ae79-438b-aedb-a90a51f580c5)

- 7種類のテトリミノ（I, O, T, S, Z, J, L）を実装
- 各テトリミノに指定された色を使用
- テトリミノの初期向きと回転軸をガイドラインに従って設定

### 1.3 テトリミノの出現
- 新しいテトリミノは最上部2行の余白から出現
- 7種1巡のランダム生成アルゴリズムを実装

### 1.4 テトリミノの動き
- 左右移動  
  左右移動とは、プレイヤーが操作するブロック（テトリミノ）を左右に動かす動作のことを指します。具体的には、テトリミノがゲームグリッド上で左または右に1マス移動するように、キーボードの入力やコントローラーの操作に応じてプログラムが処理を行うことです。

- 回転（時計回り、反時計回り)  
  時計回りの場合　90度右回転、反時計回りの場合、90度左回転。
  各テトリミノは、それぞれ固有の回転中心を持つ。
  I型- 4x4のマトリックス内で回転。中心はブロックの間。 O型- 2x2のマトリックス内で固定。 T型、S型、Z型、J型- 3x3のマトリックス内で回転,回転中心は中央のブロック
- 衝突判定
- ソフトドロップ（下キーで加速）
- ハードドロップ（即座に落下）

### 1.5 ライン消去
- 1行が全て埋まったらそのラインを消去
- 上のブロックを下に落とす

### 1.6 ゲームオーバー条件
- 新しいテトリミノが出現時に既存のブロックと重なる場合
- ブロックが完全に21段目以上に積み上がった場合

## 2. 追加機能

### 2.1 ホールド機能
- 1つのテトリミノをホールド可能
- ホールドしたテトリミノは次回以降に使用可能
- 1回の落下につき1回のみ使用可能

### 2.2 ゴーストピース
- 現在操作中のテトリミノの着地位置を薄い影で表示
- オプションでオン/オフ切り替え可能

### 2.3 NEXTテトリミノ表示
- 最低3つ先までのテトリミノを表示

### 2.4 スーパーローテーション
- 壁や他のブロックに接している状態でも、可能な場合は回転できるよう実装
- T-Spinの判定と得点計算を実装

### 2.5 ロックダウン
- テトリミノが接地後、0.5秒間操作可能
- 15回の操作または移動を行うと即座に固定

## 3. スコアシステム

### 3.1 基本スコア
- シングル、ダブル、トリプル、テトリスでの得点を設定
- レベルに応じて得点が増加

### 3.2 ボーナススコア
- T-Spinの種類に応じたボーナス得点を実装
- Back to Backボーナスの実装
- コンボ（REN）ボーナスの実装

## 4. レベルシステム

### 4.1 レベルアップ
- 10ライン消去ごとにレベルアップ
- レベルアップに伴いテトリミノの落下速度が増加

### 4.2 初期レベル選択
- ゲーム開始時に初期レベルを選択可能

## 5. UI/UX

### 5.1 画面レイアウト
- メインのゲームフィールド
- サイドパネル（NEXT、ホールド、スコア、レベル表示）

### 5.2 操作方法
- キーボード操作の実装（矢印キーとスペースバー）
- モバイル対応のタッチ操作（オプション）

### 5.3 ゲームモード
- マラソンモード（15レベルクリアでゲーム終了）
- タイムアタックモード（40ライン消去）

### 5.4 音楽と効果音
- BGMの実装
- ブロック配置、ライン消去などの効果音

## 6. その他

### 6.1 ポーズ機能
- ゲームを一時停止する機能

### 6.2 リスタート機能
- ゲームをリセットして最初から始める機能

### 6.3 ハイスコア保存
- ローカルストレージを使用してハイスコアを保存

### 6.4 レスポンシブデザイン
- 異なる画面サイズに対応したレイアウト調整

# 参考
[Wikipedia: テトリス](https://ja.wikipedia.org/wiki/%E3%83%86%E3%83%88%E3%83%AA%E3%82%B9)
[Qiita: テトリス（tetris）のガイドラインを理解する](https://qiita.com/ki_ki33/items/35566f052af7b916607b)
